(()=>{const e=document.getElementById("reset"),t=document.querySelector(".winner"),r=document.querySelector(".turn-player"),n=document.querySelector(".scoreO"),l=document.querySelector(".scoreX"),o=document.getElementById("clear"),i=document.getElementById("start"),a=document.getElementById("container"),c=document.querySelector("#matrixSize");var s,d,f,u="X",m=!1,y=!1;const p=()=>{"O"===u&&L(),t.innerHTML="",m=!1,s.forEach((e=>{e.innerText="",e.classList.remove("playerX"),e.classList.remove("playerO")})),t.classList.remove("playerO"),t.classList.remove("playerX");for(let e=0;e<d;e++)for(let t=0;t<d;t++)f[e][t]=""},L=()=>{r.classList.remove(`player${u}`),u="X"===u?"O":"X",r.classList.add(`player${u}`),r.innerText=u};function v(){let e=!!(()=>{let e,t;for(e=0;e<d;e++){for(t=0;t<d-1&&f[e][t]==f[e][t+1];t++)if(""===f[e][t]){t--;break}if(t===d-1)return!0}return!1})()||!!(()=>{let e,t;for(e=0;e<d;e++){for(t=0;t<d-1&&f[t][e]==f[t+1][e];t++)if(""===f[t][e]){t--;break}if(t===d-1)return!0}return!1})()||!!(()=>{let e=0,t=d-1;for(let t=0;t<d&&""!=f[e][e];t++){if(f[e][e]===f[e+1][e+1]&&e+1===d-1)return!0;e++}e=0;for(let r=0;r<d&&""!=f[e][t];r++){if(f[e][t]===f[e+1][t-1]&&e+1===d-1)return!0;e++,t--}return!1})();console.log(e),e&&(t.classList.add(`player${u}`),t.innerHTML="Player "+u+" has won",(()=>{let e=parseInt(l.textContent),t=parseInt(n.textContent);"X"===u?(e++,l.innerText=e):(t++,n.innerText=t)})(),m=!0)}e.addEventListener("click",(()=>{p(),n.innerText=0,l.innerText=0,y=!1,d=0,s.forEach((e=>{e.remove()}))})),o.addEventListener("click",p),i.addEventListener("click",(()=>function(e){if(!y){for(let t=0;t<e*e;t++){let e=document.createElement("div");a.appendChild(e),e.classList.add("tile")}!function(e){let t=document.getElementById("container"),r=100/e,n=" ";for(let t=0;t<e;t++)n=n+r.toString()+"%";t.style.gridTemplateColumns=n,t.style.gridTemplateRows=n}(e),y=!0,(s=Array.from(document.querySelectorAll(".tile"))).forEach(((e,t)=>{e.addEventListener("click",(()=>function(e,t){let r,n=0;if((e=>"X"!==e.innerText&&"O"!==e.innerText)(e)&&!m){e.classList.remove(`player${u}`),e.classList.add(`player${u}`),e.innerText=u;for(let e=0;e<d;e++){for(r=0;r<d;r++){if(n===t){f[e][r]=u;break}n++}if(n===t&&r!=d)break}v(),L()}}(e,t)))})),d=e,function(e){let t=new Array(e);for(let e=0;e<t.length;e++)t[e]=[];for(let r=0;r<e;r++)for(let n=0;n<e;n++)t[r][n]="";f=t}(e)}}(parseInt(c.value))))})();